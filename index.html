<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>שריון אולם - מרכז שפירא</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
			<div class="steps-indicator">
				<span class="step-dot active" data-step="1">1</span>
				<span class="step-dot" data-step="2">2</span>
				<span class="step-dot" data-step="3">3</span>
				<span class="step-dot" data-step="4">4</span>
				<span class="step-dot" data-step="5">5</span>
				<span class="step-dot" data-step="6">6</span>
				<span class="step-dot" data-step="7">7</span>
				<span class="step-dot" data-step="8">8</span>
			</div>
    </div>

    <div class="wizard-container">

        <!-- שלב 1: ברוכים הבאים -->
        <div class="step active" id="step1">
            <div class="step-content">
                <div class="welcome-icon">🏛️</div>
                <h1>שריון אולם האירועים</h1>
                <h2>אחוזת אתרוג - מרכז שפירא</h2>

                <div class="welcome-text">
                   
        <!-- ✅ טקסט חדש של ברכה וחשיבות השמירה -->
        <div class="welcome-intro">
            <div class="intro-header">
                <h3>ברוכים הבאים לאולם האירועים של מרכז שפירא🤍</h3>
            </div>
            
            <div class="intro-content">
                <p class="intro-main">
                    האולם מתופעל ומתוחזק באחריות ובמסירות על ידי הוועד – למענכם ובשבילכם.
                    כדי שכולנו נוכל ליהנות ממנו גם בעתיד, אנו מבקשים מכם לגלות אחריות, לשמור על הציוד, הניקיון והסדר, ולהתייחס למקום כאילו היה שלכם.
                </p>
                
                <div class="intro-guidelines">
                    <p>אנא הקדישו רגע לקריאת ההנחיות, אשרו את התקנון והתחייבו לעמוד בכללים.</p>
                    <p class="intro-motto"><strong>שמירה משותפת היום – מאפשרת אירועים מוצלחים גם מחר.</strong></p>
                </div>
                
                <div class="intro-wishes">
                    <p>מאחלים לכם אירוע שמח, מרגש ומוצלח ✨</p>
                    <p><strong>ובהצלחה באירוע הבא!</strong></p>
                </div>
            </div>
        </div>
                </div>

                <div class="hall-gallery">
                    <img src="images/hall1.jpg" alt="אולם האירועים 1" class="hall-img" onclick="openImage(this.src)">
                    <img src="images/hall2.jpg" alt="אולם האירועים 2" class="hall-img" onclick="openImage(this.src)">
                </div>

                <button class="btn btn-next" onclick="nextStep(1)">המשך ←</button>
            </div>
        </div>

        <!-- שלב 2: תקנון -->
        <div class="step" id="step2">
            <div class="step-content">
                <h1>📜 תקנון האולם</h1>
                <p class="subtitle">אנא קראו את התקנון בעיון ואשרו אותו</p>
                <div class="takanon-images">
                    <div class="takanon-img-wrapper">
                        <img src="images/takanon1.jpg" alt="תקנון עמוד 1" class="takanon-img" onclick="openImage(this.src)">
                        <span>📄 עמוד 1 - לחצו להגדלה</span>
                    </div>
                    <div class="takanon-img-wrapper">
                        <img src="images/takanon2.jpg" alt="תקנון עמוד 2" class="takanon-img" onclick="openImage(this.src)">
                        <span>📄 עמוד 2 - לחצו להגדלה</span>
                    </div>
                </div>
				<div class="info-section highlight-box">
                        <p>📋 שימו לב, יש להביא <strong>צ'ק פיקדון ע"ס 3,000 ₪</strong> לפקודת ועד מקומי מרכז שפירא.</p>
                        <p>✍️ וכן לחתום על התקנון של האולם.</p>
                </div>
                <label class="checkbox-container">
                    <input type="checkbox" id="takanonApproval">
                    <span class="checkmark"></span>
                    קראתי את התקנון ואני מאשר/ת את כל התנאים
                </label>
                <div class="btn-group">
                    <button class="btn btn-back" onclick="prevStep(2)">→ חזרה</button>
                    <button class="btn btn-next" onclick="nextStep(2)">המשך ←</button>
                </div>
            </div>
        </div>

        <!-- שלב 3: פרטים אישיים -->
        <div class="step" id="step3">
            <div class="step-content">
                <h1>📝 פרטים אישיים</h1>
                <p class="subtitle">מלאו את הפרטים הבאים</p>
                <form id="personalForm" class="form-grid">
                    <div class="form-group">
                        <label for="firstName">שם פרטי *</label>
                        <input type="text" id="firstName" placeholder="הכנס שם פרטי" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">שם משפחה *</label>
                        <input type="text" id="lastName" placeholder="הכנס שם משפחה" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">מספר טלפון *</label>
                        <input type="tel" id="phone" placeholder="050-0000000" required>
                    </div>
                    <div class="form-group">
                        <label for="eventType">סוג אירוע *</label>
                        <select id="eventType" required>
                            <option value="">-- בחרו סוג אירוע --</option>
                            <option value="בר מצווה">בר מצווה</option>
                            <option value="בת מצווה">בת מצווה</option>
                            <option value="אזכרה">אזכרה</option>
                            <option value="שבת חתן">שבת חתן</option>
                            <option value="ברית">ברית</option>
                            <option value="מסיבה">מסיבה</option>
                            <option value="אחר">אחר</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label for="notes">הערות / הארות</label>
                        <textarea id="notes" placeholder="הערות נוספות (לא חובה)" rows="3"></textarea>
                    </div>
                </form>
                <div class="btn-group">
                    <button class="btn btn-back" onclick="prevStep(3)">→ חזרה</button>
                    <button class="btn btn-next" onclick="nextStep(3)">המשך ←</button>
                </div>
            </div>
        </div>

        <!-- שלב 4: סוג תושב + תעריפים -->
        <div class="step" id="step4">
            <div class="step-content">
                <h1>🏠 סוג תושב ותעריפים</h1>
                <p class="subtitle">בחרו את הסיווג שלכם</p>
                <div class="resident-options">
                    <div class="resident-card" onclick="selectResident('local')">
                        <div class="resident-icon">🏡</div>
                        <h3>תושב הישוב</h3>
                        <p>תושב מרכז שפירא</p>
                    </div>
                    <div class="resident-card" onclick="selectResident('external')">
                        <div class="resident-icon">🌍</div>
                        <h3>תושב חוץ</h3>
                        <p>תושב מחוץ לישוב</p>
                    </div>
                </div>

                <!-- תעריפים לתושב ישוב -->
                <div class="pricing-section" id="localPricing" style="display:none;">
                    <h3>💰 תעריפים לתושב הישוב:</h3>
                    <div class="pricing-options">
                        <label class="pricing-card">
                            <input type="radio" name="pricing" value="weekday_local" data-price="1000">
                            <div class="pricing-content">
                                <span class="pricing-title">אירוע א'-ה' (בוקר/ערב)</span>
                                <span class="pricing-amount">₪1,000</span>
                            </div>
                        </label>
                        <label class="pricing-card">
                            <input type="radio" name="pricing" value="weekend_local" data-price="1800">
                            <div class="pricing-content">
                                <span class="pricing-title">אירוע סופ"ש (שישי-שבת)</span>
                                <span class="pricing-amount">₪1,800</span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- תעריפים לתושב חוץ -->
                <div class="pricing-section" id="externalPricing" style="display:none;">
                    <h3>💰 תעריפים לתושב חוץ:</h3>
                    <div class="pricing-options">
                        <label class="pricing-card">
                            <input type="radio" name="pricing" value="weekday_external" data-price="1500">
                            <div class="pricing-content">
                                <span class="pricing-title">אירוע א'-ה' (בוקר/ערב)</span>
                                <span class="pricing-amount">₪1,500</span>
                            </div>
                        </label>
                        <label class="pricing-card">
                            <input type="radio" name="pricing" value="weekend_external" data-price="2500">
                            <div class="pricing-content">
                                <span class="pricing-title">אירוע סופ"ש (שישי-שבת)</span>
                                <span class="pricing-amount">₪2,500</span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- תוספת מקרן ומסך -->
                <div class="addon-section" id="addonSection" style="display:none;">
                    <label class="addon-checkbox">
                        <input type="checkbox" id="projectorAddon">
                        <div class="addon-content">
                            <div class="addon-info">
                                <span class="addon-icon">🎥</span>
                                <div>
                                    <strong>השכרת מקרן ומסך</strong>
                                    <p>מקרן + מסך הקרנה לאירוע</p>
                                </div>
                            </div>
                            <span class="addon-price">+₪200</span>
                        </div>
                    </label>
                </div>

                <div class="btn-group">
                    <button class="btn btn-back" onclick="prevStep(4)">→ חזרה</button>
                    <button class="btn btn-next" onclick="nextStep(4)">המשך ←</button>
                </div>
            </div>
        </div>

        <!-- שלב 5: לוח שנה -->
        <div class="step" id="step5">
            <div class="step-content">
                <h1>📅 בחירת תאריך</h1>
                <p class="subtitle">בחרו תאריך פנוי לאירוע שלכם</p>
                <div class="calendar-legend">
                    <span class="legend-item"><span class="legend-color green"></span> פנוי</span>
                    <span class="legend-item"><span class="legend-color red"></span> תפוס</span>
                    <span class="legend-item"><span class="legend-color blue"></span> נבחר</span>
                </div>
                <div class="calendar-nav">
                    <button class="btn-calendar-nav" id="prevMonth">→ חודש קודם</button>
                    <h2 id="currentMonth"></h2>
                    <button class="btn-calendar-nav" id="nextMonth">חודש הבא ←</button>
                </div>
                <div class="calendar-grid" id="calendarGrid">
                    <div class="calendar-header-day">ראשון</div>
                    <div class="calendar-header-day">שני</div>
                    <div class="calendar-header-day">שלישי</div>
                    <div class="calendar-header-day">רביעי</div>
                    <div class="calendar-header-day">חמישי</div>
                    <div class="calendar-header-day">שישי</div>
                    <div class="calendar-header-day">שבת</div>
                </div>
                <!-- Slot Selection Modal -->
                <div class="slot-modal" id="slotModal" style="display:none;">
                    <div class="slot-modal-content">
                        <h3 id="slotModalDate"></h3>
                        <div id="slotOptions"></div>
                        <button class="btn btn-back" onclick="closeSlotModal()">ביטול</button>
                    </div>
                </div>
                <div id="selectedDateDisplay" class="selected-date-display" style="display:none;"></div>
                <div class="btn-group">
                    <button class="btn btn-back" onclick="prevStep(5)">→ חזרה</button>
                    <button class="btn btn-next" onclick="nextStep(5)">המשך ←</button>
                </div>
            </div>
        </div>

        <!-- שלב 6: סיכום והעלאת אסמכתא -->
        <div class="step" id="step6">
            <div class="step-content">
                <h1>📋 סיכום הזמנה</h1>
                <p class="subtitle">בדקו את הפרטים ושלמו</p>
                <div class="summary-card">
                    <div class="summary-row">
                        <span class="summary-label">👤 שם מלא:</span>
                        <span class="summary-value" id="sumName"></span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">📱 טלפון:</span>
                        <span class="summary-value" id="sumPhone"></span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">🎉 סוג אירוע:</span>
                        <span class="summary-value" id="sumEventType"></span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">🏠 סיווג:</span>
                        <span class="summary-value" id="sumResident"></span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">📅 תאריך:</span>
                        <span class="summary-value" id="sumDate"></span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">⏰ שעות:</span>
                        <span class="summary-value" id="sumHours"></span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">📝 הערות:</span>
                        <span class="summary-value" id="sumNotes"></span>
                    </div>
					 <div class="summary-row" id="sumProjectorRow" style="display:none;">
                        <span class="summary-label">🎥 מקרן ומסך:</span>
                        <span class="summary-value">+₪200</span>
                    </div>
                    <div class="summary-row total">
                        <span class="summary-label">💰 סה"כ לתשלום:</span>
                        <span class="summary-value" id="sumTotal"></span>
                    </div>
                </div>

                <div class="payment-section" id="paymentSection">
                    <h3>💳 אמצעי תשלום - בחרו אחד מהאפשרויות הבאות:</h3>
                    <div class="payment-methods">
                        <div class="payment-method">
                            <span class="payment-icon">📱</span>
                            <strong>ביט</strong>
                            <p class="payment-details">בקרוב יהיה ניתן לשלם בביט</p>
                            <!-- 🔴 שנה למספר האמיתי -->
                        </div>
                        <div class="payment-method">
                            <span class="payment-icon">💳</span>
                            <strong>פייבוקס</strong>
                            <p class="payment-details">בקרוב יהיה ניתן לשלם בפייבוקס</p>
                            <!-- 🔴 שנה למספר האמיתי -->
                        </div>
                        <div class="payment-method">
                            <span class="payment-icon">🏦</span>
                            <strong>העברה בנקאית</strong>
                            <p class="payment-details">
                                בנק: לאומי (10)<br>
                                סניף: קרית מלאכי (985)<br>
                                חשבון: 2049799 <br>
                                ע"ש: וועד מקומי מרכז שפירא.
                            </p>
                            <!-- 🔴 שנה לפרטים האמיתיים -->
                        </div>
                    </div>
                    <div class="upload-section">
                        <h3>📸 העלאת אסמכתא לתשלום:</h3>
                        <p class="upload-instructions">לאחר ביצוע התשלום, צלמו את האסמכתא והעלו אותה כאן</p>
                        <label class="upload-btn" for="receiptUpload">
                            <span>📎 לחצו להעלאת צילום אסמכתא</span>
                           <input type="file" id="receiptUpload" accept="image/*" onchange="handleFileUpload(event)">
                        </label>
                        <div id="uploadPreview" class="upload-preview" style="display:none;">
							<p>✅ <span id="fileName"></span></p>
							<img id="receiptPreviewImg" class="receipt-preview-img" src="" alt="תצוגה מקדימה">
							<button type="button" class="btn-change-image" onclick="document.getElementById('receiptUpload').click()">
								🔄 החלף תמונה
							</button>
						</div>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-back" onclick="prevStep(6)">→ חזרה</button>
                   <button class="btn btn-next" id="step6NextBtn" onclick="nextStep(6)">המשך	</button>
                </div>
            </div>
        </div>
		
<!-- שלב 7: דף יום האירוע -->
<div class="step" id="step7">
    <div class="step-content">
        <h1>📄 דף יום האירוע</h1>
        <p class="subtitle">המסמך שלכם מוכן להורדה!</p>
        
        <div class="document-preview">
            <div class="preview-header">
                <h3>🎉 דף יום האירוע</h3>
                <p>המסמך כולל את כל הפרטים והנהלים ליום האירוע שלכם</p>
            </div>
            
            <div class="document-actions">
                <button class="btn btn-download" onclick="downloadEventDocument()">
                    📥 הורד דף יום האירוע
                </button>
                <button class="btn btn-print" onclick="printEventDocument()">
                    🖨️ הדפס מסמך
                </button>
            </div>
        </div>
        
        <div class="step-instructions">
            <div class="instruction-box">
                <h4>📋 חשוב לשמור!</h4>
                <p>• הורידו והדפיסו את המסמך</p>
                <p>• הביאו איתכם ליום האירוע</p>
                <p>• עקבו אחר הנהלים המפורטים במסמך</p>
            </div>
        </div>

        <!-- ✅ הוספת checkbox לאישור הורדה -->
        <div class="document-confirmation">
            <label class="checkbox-container document-checkbox">
                <input type="checkbox" id="documentConfirmation" onchange="toggleDocumentSubmit()">
                <span class="checkmark"></span>
                <span class="confirmation-text">
                    ✅ <strong>אישור:</strong> הורדתי וקראתי את דף יום האירוע ואני מתחייב/ת לפעול לפי ההנחיות
                </span>
            </label>
        </div>

        <div class="btn-group">
            <button class="btn btn-back" onclick="prevStep(7)">→ חזרה</button>
            <button class="btn btn-next" id="step7SubmitBtn" onclick="nextStep(7)" disabled>שלח הזמנה ←</button>
        </div>
    </div>
</div>

<!-- שלב 8: אישור -->
<div class="step" id="step8">
    <div class="step-content center-content">
        <div class="success-animation">
            <div class="success-icon">✅</div>
            <h1>ההזמנה נשלחה בהצלחה!</h1>
            <p class="success-text">תודה רבה! ההזמנה שלכם התקבלה ונשלחה למנהלי האולם.</p>
            <p class="success-text">נחזור אליכם בהקדם לאישור סופי.</p>
            <div class="order-number">
                מספר הזמנה: <strong id="orderNumber"></strong>
            </div>
            <button class="btn btn-next" onclick="location.reload()">הזמנה חדשה 🔄</button>
        </div>
    </div>
</div>

    </div>

    <!-- Image Modal -->
    <div class="image-modal" id="imageModal" onclick="closeImageModal()">
        <img id="modalImage" src="" alt="תקנון מוגדל">
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display:none;">
        <div class="spinner"></div>
        <p>שולח הזמנה...</p>
    </div>

    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <!-- Firebase SDK - רק Firestore, בלי Storage -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script src="js/firebase-config.js"></script>
    <script src="js/hebrew-date.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/app.js"></script>
</body>
</html>